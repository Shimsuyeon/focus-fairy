# 🧚‍♀️ 집중요정 (Focus Fairy)

[![Buy Me A Coffee](https://img.shields.io/badge/Buy%20Me%20A%20Coffee-FFDD00?style=flat&logo=buy-me-a-coffee&logoColor=black)](https://buymeacoffee.com/shimsuyeon)

8명 스터디 그룹을 위한 슬랙 기반 집중 시간 트래커 봇

> 📖 [집중요정 개발기 — 쓰던 봇이 유료 전환? 그럼 직접 만들지](https://developer-dreamer.tistory.com/217)

## ✨ 기능

| 명령어     | 설명                                                                     |
| ---------- | ------------------------------------------------------------------------ |
| `/start`   | 집중 시작                                                                |
| `/end`     | 집중 종료 (6시간 초과 시 수동 입력 가능: `/end 2시간 30분`)              |
| `/today`   | 오늘 집중한 사람들 현황                                                  |
| `/mystats` | 내 집중 통계 (이번 주 / 전체 누적)                                       |
| `/weekly`  | 이번 주 랭킹 리포트                                                      |
| `/report`  | 기간별 리포트 (`thisweek`, `lastweek`, `thismonth`, `26-01-01 26-01-07`) |
| `/export`  | 집중 기록 내보내기 (`text`, `graph`, `csv`)                              |
| `/pattern` | 집중 패턴 분석 (`time`, `day`)                                           |

## 🛠 기술 스택

- **Cloudflare Workers** - 서버리스 배포
- **Cloudflare KV** - 데이터 저장
- **Slack Slash Commands** - 인터페이스
- **TypeScript**

## 🚀 배포

```bash
# 개발 서버
npm run dev

# 배포
npx wrangler deploy

# 시크릿 설정 (멀티 워크스페이스)
echo '{"TEAM_ID_1":"xoxb-...", "TEAM_ID_2":"xoxb-..."}' | npx wrangler secret put SLACK_BOT_TOKENS
```

## 🌳 집중의 나무 (Focus Tree)

도메인 접속 시 팀의 집중 현황을 시각화한 랜딩 페이지

- 팀원별 주간 집중시간을 **열매**로 표현
- 현재 집중 중인 멤버는 **반짝반짝** 애니메이션
- 주가 지날수록 나무가 성장하는 모습 🌱→🌳

## 🧚‍♀️ 특징

- 요정 컨셉의 커스텀 이모지 (:fairy-wand:, :fairy-fire: 등)
- 세션 종료 시 랜덤 격려 메시지 15종
- 한국 시간대(KST) 기준 동작
- 멀티 워크스페이스 지원

---

# 📋 릴리즈 노트

## [1.7.0] - 2026-02-12

### ✨ 새로운 기능

- **집중의 나무 (Focus Tree)** 랜딩 페이지 추가
  - 도메인 접속 시 팀원들의 집중 데이터를 시각화
  - 팀원별 주간 집중시간을 열매로 표현 (크기 = 집중시간)
  - 현재 집중 중인 멤버 열매에 펄스 애니메이션 🔥
  - 반딧불이 배경 애니메이션으로 신비로운 분위기

### 🎨 UI/UX

- 이번 주 (월~일) 기준 데이터 표시
- 열매 hover 시 집중시간 툴팁
- Tangerine 필기체 폰트로 우아한 제목
- 하단 통계: 팀원 수, 총 집중시간, 집중 중인 인원

### 🔧 기술 개선

- 랜딩 페이지 모듈화 (`src/pages/landing/`)
- CSS 변수 기반 스타일 관리
- `DEFAULT_TEAM_ID` 환경변수로 이동 (보안)

---

## [1.6.1] - 2026-02-05

### 🐛 버그 수정

- `/pattern` 명령어 응답 속도 개선
  - KV 읽기를 순차 → 병렬 처리로 변경
  - 30일치 데이터를 동시에 읽어 Slack 3초 타임아웃 해결

---

## [1.6.0] - 2026-01-19

### ✨ 새로운 기능

- `/pattern` 명령어 추가: 집중 패턴 분석
  - `/pattern` - 전체 패턴 요약 (시간대, 요일, 평균 세션 등)
  - `/pattern time` - 시간대별 가로 막대 그래프
  - `/pattern day` - 요일별 가로 막대 그래프 (주말 강조)

### 📊 분석 항목

- 가장 집중 잘 되는 시간대
- 가장 많이 집중한 요일
- 평균 세션 길이
- 최장 세션 기록
- 주간 평균

---

## [1.5.0] - 2026-01-19

### ✨ 새로운 기능

- `/export` 명령어 추가: 개인 집중 기록 내보내기
  - `/export` 또는 `/export text` - 텍스트 목록 (본인에게만 표시)
  - `/export graph` - 일별 막대 그래프 이미지 (본인에게만 표시)
  - `/export csv` - CSV 파일 (DM으로 전송)
  - 기간 지정 가능: `thisweek`, `lastweek`, `thismonth`, `26-01-01 26-01-15`

### 📋 사용 예시

```
/export                     → 이번 주 텍스트
/export graph lastweek      → 지난 주 그래프
/export csv thismonth       → 이번 달 CSV 파일
/export text 26-01-01 26-01-15  → 특정 기간 텍스트
```

---

## [1.4.0] - 2026-01-13

### ✨ 새로운 기능

- 모든 명령어 입력 시 명령어가 채널에 표시되지 않도록 개선
  - `/start`, `/end`: 본인에게 짧은 확인 메시지, 채널에 공지 (멘션)
  - `/today`, `/mystats`: 결과가 본인에게만 표시
  - `/weekly`, `/report`: 채널에 "OOO님이 조회했어요" + 결과 표시

### 🐛 버그 수정

- 일요일 밤~월요일 새벽 세션의 주간 누적 시간 표시 오류 수정
  - 세션을 시작 시간 기준으로 저장
  - "이번 주" / "지난 주" 라벨 동적 표시

### 🔧 개선

- `/today`, `/weekly`, `/report` 리포트에서 멘션(@) 대신 이름 표시
- GitHub 레포지토리 기반 개발 환경으로 전환
- 코드 모듈화로 유지보수성 향상

---

## [1.3.0] - 2026-01-08

### ✨ 새로운 기능

- `/end` 시간 수동 입력 기능 추가
  - 6시간 초과 시 실제 집중 시간 직접 입력 가능
  - 예: `/end 2시간 30분`
- 요정 컨셉의 커스텀 이모지 추가 (:fairy-wand:, :fairy-fire: 등)
- 세션 종료 시 랜덤 격려 메시지 15종

### 💡 사용 예시

> 밤 11시에 `/start` → 깜빡 잠들어서 → 다음날 아침 `/end 3시간` 입력

---

## [1.2.0] - 2026-01-07

### ✨ 새로운 기능

- `/report` 명령어 추가: 기간별 집중 시간 조회
  - `/report thisweek` - 이번 주
  - `/report lastweek` - 지난 주
  - `/report thismonth` - 이번 달
  - `/report 26-01-01 26-01-07` - 특정 기간

---

## [1.0.0] - 2026-01-07

### 🎉 첫 출시

8명 스터디 그룹을 위한 슬랙 기반 집중 시간 트래커 봇

### 📌 주요 기능

- `/start` - 집중 시작
- `/end` - 집중 종료
- `/weekly` - 이번 주 랭킹 리포트
- `/mystats` - 내 집중 통계 (이번 주 / 전체 누적)
- `/today` - 오늘 집중한 사람들 현황
